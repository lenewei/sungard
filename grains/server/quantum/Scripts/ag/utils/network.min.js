var ag;(function(n){(function(t){function i(n){var t=n,i=[];if(n.responseText)try{t=$.parseJSON(n.responseText)}catch(r){n.status===404?(t.hasErrors=!0,t.errors=[n.statusText]):n.responseText.trim().startsWith("<")&&(t.hasErrors=!0,t.errors=["Unable to display error information due to incorrect server configuration."])}return t.hasErrors?(t.errors&&$.each(t.errors,function(n,t){i.push(t)}),t.modelErrors&&$.each(t.modelErrors,function(n,t){i.push(t.error)})):i.push("Unknown server error."),i}function f(t){return PubSub.publish(n.topics.ErrorMessage,i(t).join("\r\n")),!1}function e(t,i,r,u,f){return n.utils.requestData("GET","json",t,i,r,u,f)}function o(t,i,r,u,f){return n.utils.requestData("POST","json",t,i,r,u,f)}function s(t,i,r,u,f){return n.utils.requestData("GET","html",t,i,r,u,f)}function r(t,i,r,u,f,e,o){var c={},s,a={area:n.area,controller:n.controller},h=typeof r=="string"?$.extend({},a,{action:r}):$.extend({},a,r),l=n.applicationPath,v;return l==="/"&&(l=""),v=h.url||"{0}/{1}/{2}/{3}".format(l,h.area,h.controller,h.action),c.__PageIdToken=$("input[name='__PageIdToken']").val(),s=t=="GET"?$.toDictionary(n.utils.cleanJSForGetRequest(u)):u,t==="POST"&&(c.__RequestVerificationToken=$("input[name='__RequestVerificationToken']").val(),typeof s=="object"&&(s=JSON.stringify(s,function(n,t){return typeof t=="number"?t.toString():t}))),$.ajax({cache:!!o,dataType:i,type:t,headers:c,data:s,contentType:t!=="POST"?"application/x-www-form-urlencoded":"application/json; charset=utf-8",url:v,success:function(n){f&&typeof f=="function"&&f(n)},error:function(n,t,i){e&&typeof e=="function"&&(n.status==401?$("#authenticationErrorDialog").modal({backdrop:"static",keyboard:!1,show:!0}):e(n,t,i))}})}var u=function(){function t(t){this.options=t,this.defaults={area:n.area,controller:n.controller,responseOnlyAttribute:[]},this.actionOptions={},this.responseOnlyAttributes=[],t=$.extend({},this.defaults,t),this.actionOptions={area:t.area,controller:t.controller},this.responseOnlyAttributes=t.responseOnlyAttribute.split?t.responseOnlyAttribute.split(","):[]}return t.prototype.requestData=function(t,i,u,f,e,o){this.responseOnlyAttributes!=undefined&&t=="GET"&&$.each(this.responseOnlyAttributes,function(t,i){n.utils.setDescendantProperty(f,i.toCamelCase(),null)});var s=typeof u=="string"?$.extend({},this.actionOptions,{action:u}):$.extend({},this.actionOptions,u);return r(t,i,s,f,function(n){e&&typeof e=="function"&&e(n)},function(t){if(t.readyState==0)return undefined;n.utils.showErrorsFromResult(t),o&&typeof o=="function"&&o(t)})},t.prototype.setupValidationHandlers=function(t){var r=function(t){var i=$(t).closest("form"),r=i.data("validator");$(".nav-tabs > li.error").removeClass("error"),_.each(r.invalid,function(t,i){var r=n.utils.getClosestTabHeader($("#"+i.replace(/\./g,"_")));r&&r.addClass("error")})},u=_.throttle(r,200),i=function(n){return function(t,i,r){n(t,i,r),u(t)}};t.settings.highlight=i(t.settings.highlight),t.settings.unhighlight=i(t.settings.unhighlight)},t.prototype.validateAndPostJson=function(t,i,r,u){var f=n.utils.getValidator(),e;return f&&(f.settings&&!f.settings.agValidationHandlersSetup&&(this.setupValidationHandlers(f),f.settings.agValidationHandlersSetup=!0),!f.form())?(e={hasErrors:!0,errors:[]},_.each(f.errorList,function(n){e.errors.push(n.message)}),n.utils.showErrorsFromResult(e),null):this.postJson(t,i,r,u)},t.prototype.postJson=function(n,t,i,r){return this.requestData("POST","json",n,t,i,r)},t.prototype.getJson=function(n,t,i,r){return this.requestData("GET","json",n,t,i,r)},t.prototype.getHtml=function(n,t,i,r){return this.requestData("GET","html",n,t,i,r)},t}();t.Network=u,t.getErrorsFromResponse=i,t.showErrorsFromResult=f,t.getJson=e,t.postJson=o,t.getHtml=s,t.requestData=r})(n.utils||(n.utils={}));var t=n.utils})(ag||(ag={}))